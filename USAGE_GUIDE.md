# ä½¿ç”¨æŒ‡å— (Usage Guide)

## æ³°å¦å°¼å…‹å·ç”Ÿè¿˜é¢„æµ‹ - è´å¶æ–¯æ¨æ–­å®ç°

---

## å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. å®‰è£…ä¾èµ– (Install Dependencies)

```bash
pip install -r requirements.txt
```

**åŸºç¡€ç‰ˆæœ¬ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰:**
```bash
pip install numpy pandas scipy scikit-learn matplotlib
```

**å®Œæ•´ç‰ˆæœ¬ï¼ˆåŒ…å«PyMCè´å¶æ–¯åº“ï¼‰:**
```bash
pip install numpy pandas pymc arviz matplotlib seaborn scikit-learn scipy
```

---

### 2. è¿è¡Œç®€åŒ–ç‰ˆæ¼”ç¤º (Run Simplified Demo)

**è¿™æ˜¯æ¨èçš„ç¬¬ä¸€æ­¥**ï¼Œä½¿ç”¨ç®€åŒ–çš„è´å¶æ–¯å®ç°ï¼Œæ— éœ€å¤æ‚ä¾èµ–ï¼š

```bash
python simple_bayesian_demo.py
```

**è¾“å‡ºï¼š**
- æ§åˆ¶å°æ˜¾ç¤ºæ¨¡å‹è®­ç»ƒè¿‡ç¨‹å’Œç»“æœ
- ç”Ÿæˆ `bayesian_results.json` æ–‡ä»¶

---

### 3. å¯è§†åŒ–ç»“æœ (Visualize Results)

è¿è¡Œå¯è§†åŒ–è„šæœ¬ç”Ÿæˆå›¾è¡¨ï¼š

```bash
python visualize_results.py
```

**ç”Ÿæˆçš„æ–‡ä»¶ï¼š**
- `feature_coefficients.png` - ç‰¹å¾ç³»æ•°å›¾
- `feature_importance_ranking.png` - ç‰¹å¾é‡è¦æ€§æ’å
- `summary_dashboard.png` - ç»¼åˆä»ªè¡¨æ¿
- `model_interpretation.txt` - ç»“æœè§£é‡Šæ–‡æœ¬

---

### 4. è¿è¡Œå®Œæ•´ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰

å¦‚æœå®‰è£…äº†PyMCï¼Œå¯ä»¥è¿è¡Œå®Œæ•´çš„è´å¶æ–¯æ¨æ–­å®ç°ï¼š

```bash
python bayesian_survival_prediction.py
```

**æ³¨æ„ï¼š** è¿™ä¸ªç‰ˆæœ¬ä½¿ç”¨MCMCé‡‡æ ·ï¼Œè¿è¡Œæ—¶é—´è¾ƒé•¿ï¼ˆçº¦5-10åˆ†é’Ÿï¼‰ï¼Œä½†èƒ½æä¾›æ›´å‡†ç¡®çš„åéªŒåˆ†å¸ƒä¼°è®¡ã€‚

---

## æ–‡ä»¶è¯´æ˜ (File Description)

### Pythonè„šæœ¬

1. **`simple_bayesian_demo.py`** â­ æ¨èé¦–é€‰
   - ç®€åŒ–çš„è´å¶æ–¯å®ç°
   - ä½¿ç”¨æœ€å¤§åéªŒæ¦‚ç‡(MAP)ä¼°è®¡
   - ä¾èµ–å°‘ï¼Œè¿è¡Œå¿«
   - é€‚åˆå¿«é€Ÿç†è§£å’Œæ¼”ç¤º

2. **`bayesian_survival_prediction.py`**
   - å®Œæ•´çš„è´å¶æ–¯æ¨æ–­å®ç°
   - ä½¿ç”¨PyMCå’ŒNUTSé‡‡æ ·å™¨
   - æä¾›å®Œæ•´çš„åéªŒåˆ†å¸ƒ
   - é€‚åˆæ·±å…¥ç ”ç©¶

3. **`visualize_results.py`**
   - å¯è§†åŒ–å·¥å…·
   - è¯»å– `bayesian_results.json`
   - ç”Ÿæˆå¤šç§å›¾è¡¨å’Œè§£é‡Š

### æ•°æ®æ–‡ä»¶

- **`bayesian_results.json`**
  - æ¨¡å‹ç»“æœçš„JSONæ ¼å¼å­˜å‚¨
  - åŒ…å«ç³»æ•°ã€é‡è¦æ€§ã€å‡†ç¡®ç‡ç­‰ä¿¡æ¯

### æ–‡æ¡£

- **`BAYESIAN_PREDICTION_README.md`**
  - è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£
  - ç†è®ºèƒŒæ™¯å’Œå®ç°ç»†èŠ‚
  - è´å¶æ–¯æ–¹æ³•ä¼˜åŠ¿è¯´æ˜

- **`requirements.txt`**
  - Pythonä¾èµ–åŒ…åˆ—è¡¨

- **`model_interpretation.txt`**
  - è‡ªåŠ¨ç”Ÿæˆçš„ç»“æœè§£é‡Š
  - ç‰¹å¾å½±å“åˆ†æ
  - å…³é”®å‘ç°æ€»ç»“

---

## è¯¦ç»†ä½¿ç”¨è¯´æ˜ (Detailed Usage)

### ä½¿ç”¨è‡ªå·±çš„æ•°æ® (Using Your Own Data)

#### æ–¹æ³•1ï¼šCSVæ–‡ä»¶

å‡†å¤‡ä¸€ä¸ªCSVæ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹åˆ—ï¼š
- `Survived`: 0=æœªç”Ÿè¿˜, 1=ç”Ÿè¿˜
- `Pclass`: èˆ¹èˆ±ç­‰çº§ (1, 2, 3)
- `Sex`: æ€§åˆ« ('male', 'female')
- `Age`: å¹´é¾„
- `SibSp`: å…„å¼Ÿå§å¦¹/é…å¶æ•°é‡
- `Parch`: çˆ¶æ¯/å­å¥³æ•°é‡
- `Fare`: ç¥¨ä»·
- `Embarked`: ç™»èˆ¹æ¸¯å£ ('S', 'C', 'Q')

ç„¶åä¿®æ”¹ä»£ç ï¼š

```python
from simple_bayesian_demo import SimpleBayesianPredictor
import pandas as pd

# è¯»å–æ•°æ®
data = pd.read_csv('your_titanic_data.csv')

# åˆ›å»ºæ¨¡å‹
model = SimpleBayesianPredictor()

# é¢„å¤„ç†æ•°æ®
X, y = model.preprocess_data(data=data)

# è®­ç»ƒå’Œé¢„æµ‹...
```

#### æ–¹æ³•2ï¼šä½¿ç”¨DataFrame

```python
import pandas as pd
from simple_bayesian_demo import SimpleBayesianPredictor

# åˆ›å»ºæˆ–åŠ è½½DataFrame
df = pd.DataFrame({
    'Survived': [0, 1, 1, 0, 1],
    'Pclass': [3, 1, 3, 1, 2],
    'Sex': ['male', 'female', 'female', 'male', 'female'],
    'Age': [22, 38, 26, 35, 35],
    'SibSp': [1, 1, 0, 0, 0],
    'Parch': [0, 0, 0, 0, 0],
    'Fare': [7.25, 71.28, 7.92, 53.10, 27.75],
    'Embarked': ['S', 'C', 'S', 'S', 'S']
})

model = SimpleBayesianPredictor()
X, y = model.preprocess_data(data=df)

# ç»§ç»­è®­ç»ƒ...
```

---

## ç»“æœè§£è¯» (Result Interpretation)

### ç‰¹å¾ç³»æ•° (Feature Coefficients)

- **æ­£ç³»æ•° (+)**: è¯¥ç‰¹å¾å€¼å¢åŠ æ—¶ï¼Œç”Ÿè¿˜æ¦‚ç‡å¢åŠ 
  - ä¾‹ï¼šç¥¨ä»·ç³»æ•°ä¸ºæ­£ â†’ ç¥¨ä»·è¶Šé«˜ï¼Œç”Ÿè¿˜æ¦‚ç‡è¶Šé«˜
  
- **è´Ÿç³»æ•° (-)**: è¯¥ç‰¹å¾å€¼å¢åŠ æ—¶ï¼Œç”Ÿè¿˜æ¦‚ç‡é™ä½
  - ä¾‹ï¼šæ€§åˆ«(ç”·æ€§=1)ç³»æ•°ä¸ºè´Ÿ â†’ ç”·æ€§ç”Ÿè¿˜æ¦‚ç‡æ¯”å¥³æ€§ä½
  - ä¾‹ï¼šèˆ¹èˆ±ç­‰çº§ç³»æ•°ä¸ºè´Ÿ â†’ ç­‰çº§æ•°å­—è¶Šå¤§(3ç­‰èˆ±)ï¼Œç”Ÿè¿˜æ¦‚ç‡è¶Šä½

### ç‰¹å¾é‡è¦æ€§ (Feature Importance)

é‡è¦æ€§ = ç³»æ•°çš„ç»å¯¹å€¼

- æ•°å€¼è¶Šå¤§ï¼Œè¯¥ç‰¹å¾å¯¹é¢„æµ‹ç»“æœçš„å½±å“è¶Šå¤§
- æ’åè¶Šé å‰ï¼Œè¯¥ç‰¹å¾è¶Šé‡è¦

### é¢„æµ‹ä¸ç¡®å®šæ€§ (Prediction Uncertainty)

- åœ¨å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œæ¯ä¸ªé¢„æµ‹éƒ½æœ‰ä¸€ä¸ªä¸ç¡®å®šæ€§ä¼°è®¡ï¼ˆæ ‡å‡†å·®ï¼‰
- ä¸ç¡®å®šæ€§é«˜çš„é¢„æµ‹è¡¨ç¤ºæ¨¡å‹å¯¹è¯¥æ ·æœ¬çš„é¢„æµ‹ä¿¡å¿ƒè¾ƒä½

---

## å¸¸è§é—®é¢˜ (FAQ)

### Q1: ä¸ºä»€ä¹ˆèˆ¹èˆ±ç­‰çº§ç³»æ•°æ˜¯è´Ÿçš„ï¼Ÿ
**A**: èˆ¹èˆ±ç­‰çº§ç”¨æ•°å­—1, 2, 3è¡¨ç¤ºï¼Œæ•°å­—è¶Šå¤§è¡¨ç¤ºç­‰çº§è¶Šä½ã€‚å› æ­¤è´Ÿç³»æ•°æ„å‘³ç€ç­‰çº§æ•°å­—å¢åŠ ï¼ˆå³ç­‰çº§é™ä½ï¼‰æ—¶ï¼Œç”Ÿè¿˜æ¦‚ç‡é™ä½ï¼Œè¿™ç¬¦åˆå†å²äº‹å®ã€‚

### Q2: æ€§åˆ«ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ
**A**: å†å²æ•°æ®æ˜¾ç¤º"å¦‡å¥³å’Œå„¿ç«¥ä¼˜å…ˆ"çš„æ•‘æ´åŸåˆ™ï¼Œå¥³æ€§ç”Ÿè¿˜ç‡æ˜æ˜¾é«˜äºç”·æ€§ã€‚

### Q3: å¦‚ä½•æé«˜æ¨¡å‹å‡†ç¡®ç‡ï¼Ÿ
**A**: å¯ä»¥å°è¯•ï¼š
- å¢åŠ è®­ç»ƒæ•°æ®é‡
- æ·»åŠ ç‰¹å¾äº¤äº’é¡¹ï¼ˆå¦‚å¹´é¾„Ã—æ€§åˆ«ï¼‰
- ä½¿ç”¨éçº¿æ€§æ¨¡å‹
- è°ƒæ•´å…ˆéªŒåˆ†å¸ƒ

### Q4: ç®€åŒ–ç‰ˆå’Œå®Œæ•´ç‰ˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**A**: 
- **ç®€åŒ–ç‰ˆ**: ä½¿ç”¨MAPä¼°è®¡ï¼Œè¿è¡Œå¿«ï¼Œé€‚åˆå¿«é€Ÿåˆ†æ
- **å®Œæ•´ç‰ˆ**: ä½¿ç”¨MCMCé‡‡æ ·ï¼Œæä¾›å®Œæ•´åéªŒåˆ†å¸ƒï¼Œæ›´å‡†ç¡®ä½†è¿è¡Œæ…¢

### Q5: å¦‚ä½•åˆ¤æ–­æ¨¡å‹è´¨é‡ï¼Ÿ
**A**: æŸ¥çœ‹ä»¥ä¸‹æŒ‡æ ‡ï¼š
- å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰ï¼š>70%è¾ƒå¥½
- ç²¾ç¡®ç‡å’Œå¬å›ç‡ï¼šæŸ¥çœ‹åˆ†ç±»æŠ¥å‘Š
- åéªŒåˆ†å¸ƒï¼šå®Œæ•´ç‰ˆä¸­æ£€æŸ¥æ˜¯å¦æ”¶æ•›

---

## é«˜çº§ç”¨æ³• (Advanced Usage)

### è°ƒæ•´å…ˆéªŒåˆ†å¸ƒ

åœ¨ `SimpleBayesianPredictor` ä¸­ï¼š

```python
# æ›´å¼ºçš„æ­£åˆ™åŒ–ï¼ˆæ›´å°çš„prior_stdï¼‰
model = SimpleBayesianPredictor(prior_std=1.0)

# æ›´å¼±çš„æ­£åˆ™åŒ–ï¼ˆæ›´å¤§çš„prior_stdï¼‰
model = SimpleBayesianPredictor(prior_std=5.0)
```

### è‡ªå®šä¹‰é˜ˆå€¼

```python
# é»˜è®¤é˜ˆå€¼0.5
predictions = model.predict(X_test, threshold=0.5)

# æé«˜é˜ˆå€¼ï¼Œå‡å°‘å‡é˜³æ€§
predictions = model.predict(X_test, threshold=0.7)

# é™ä½é˜ˆå€¼ï¼Œå‡å°‘å‡é˜´æ€§
predictions = model.predict(X_test, threshold=0.3)
```

### äº¤å‰éªŒè¯

```python
from sklearn.model_selection import cross_val_score
from sklearn.base import BaseEstimator, ClassifierMixin

class BayesianClassifier(BaseEstimator, ClassifierMixin):
    def __init__(self, prior_std=2.0):
        self.model = SimpleBayesianPredictor(prior_std)
    
    def fit(self, X, y):
        self.model.fit(X, y)
        return self
    
    def predict(self, X):
        return self.model.predict(X)

# 5æŠ˜äº¤å‰éªŒè¯
clf = BayesianClassifier()
scores = cross_val_score(clf, X, y, cv=5)
print(f"äº¤å‰éªŒè¯å¾—åˆ†: {scores.mean():.4f} (+/- {scores.std():.4f})")
```

---

## ç¤ºä¾‹å·¥ä½œæµ (Example Workflow)

å®Œæ•´çš„åˆ†ææµç¨‹ï¼š

```bash
# 1. å®‰è£…ä¾èµ–
pip install numpy pandas scipy scikit-learn matplotlib

# 2. è¿è¡Œç®€åŒ–ç‰ˆæ¨¡å‹
python simple_bayesian_demo.py

# 3. ç”Ÿæˆå¯è§†åŒ–
python visualize_results.py

# 4. æŸ¥çœ‹ç»“æœ
cat model_interpretation.txt

# 5. æŸ¥çœ‹å›¾è¡¨
# åœ¨æ–‡ä»¶æµè§ˆå™¨ä¸­æ‰“å¼€ .png æ–‡ä»¶
```

---

## è¾“å‡ºç¤ºä¾‹ (Output Examples)

### æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹

```
======================================================================
æ³°å¦å°¼å…‹å·ç”Ÿè¿˜é¢„æµ‹ - ç®€åŒ–è´å¶æ–¯æ¨æ–­
======================================================================

1. ç”Ÿæˆå’Œé¢„å¤„ç†ç¤ºä¾‹æ•°æ®...
   æ•°æ®å½¢çŠ¶: X=(300, 8), y=(300,)
   ç‰¹å¾æ•°é‡: 8
   è®­ç»ƒé›†: 225 æ ·æœ¬
   æµ‹è¯•é›†: 75 æ ·æœ¬

2. è®­ç»ƒè´å¶æ–¯æ¨¡å‹ (MAPä¼°è®¡)...
   è®­ç»ƒå®Œæˆï¼

======================================================================
è´å¶æ–¯é€»è¾‘å›å½’æ¨¡å‹æ‘˜è¦ (MAPä¼°è®¡)
======================================================================
å‚æ•°                            ä¼°è®¡å€¼           è¿‘ä¼¼æ ‡å‡†å·®
----------------------------------------------------------------------
æˆªè·(Intercept)             -0.4723          0.5000
æ€§åˆ«(ç”·æ€§=1)                  -1.2049          0.5000
èˆ¹èˆ±ç­‰çº§                      -1.3106          0.5000
å¹´é¾„                        -0.2846          0.5000
...
```

### JSONè¾“å‡ºç¤ºä¾‹ (bayesian_results.json)

```json
{
  "accuracy": 0.7067,
  "feature_names": ["æ€§åˆ«(ç”·æ€§=1)", "èˆ¹èˆ±ç­‰çº§", "å¹´é¾„", ...],
  "coefficients": {
    "intercept": -0.4723,
    "features": {
      "æ€§åˆ«(ç”·æ€§=1)": -1.2049,
      "èˆ¹èˆ±ç­‰çº§": -1.3106,
      ...
    }
  },
  "feature_importance": {
    "èˆ¹èˆ±ç­‰çº§": 1.3106,
    "æ€§åˆ«(ç”·æ€§=1)": 1.2049,
    ...
  }
}
```

---

## æŠ€æœ¯æ”¯æŒ (Support)

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. `BAYESIAN_PREDICTION_README.md` - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
2. ä»£ç æ³¨é‡Š - æ¯ä¸ªå‡½æ•°éƒ½æœ‰è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
3. ç¤ºä¾‹è¾“å‡º - å‚è€ƒæœ¬æ–‡ä»¶çš„ç¤ºä¾‹

---

## è®¸å¯è¯ (License)

MIT License

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼Happy predicting! ğŸš¢**
